import com.rameses.annotations.*;
import com.rameses.util.*;
import java.rmi.server.*;
import com.rameses.services.extended.*;

class CollectorLookupService extends AbstractListService {

	@PersistenceContext("main")
	def em;

	String schemaName = "collector";
	
	@ProxyMethod
	public def getColumns( def p ) {
		return [
			[name:"username", caption:"User Name"],
			[name:"lastname", caption:"Last Name"],
			[name:"firstname", caption:"First Name"],
			[name:"jobtitle", caption:"Job Title"],
		];	
	}

	public void afterList(def p, def list) {
		list.each {
			it.name = it.firstname + " " + it.lastname;
		}
	}	

	@ProxyMethod
	public def findCollector( def o ) {
		return em.sqlContext.createNamedQuery("collector:findCollector").setParameters(o).singleResult;
	}

}
