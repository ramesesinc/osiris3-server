import com.rameses.annotations.*
import com.rameses.common.*

class BankListService {

	@PersistenceContext('main')
	def em
	
	@ProxyMethod
	public def getColumns(def p) {
		return [
			[name:"code", caption:"Bank Code"],
			[name:"name", caption:"Bank Name"],
			[name:"branchname", caption:"Branch Name"],
			[name:"address", caption:"Address"],
		];
	}
	
	@ProxyMethod
	public List getList( params ) {
		params.searchtext = (params.searchtext ? params.searchtext : '')
		params.code = params.searchtext
		params.name = params.searchtext+'%'
		return em.sqlContext.createNamedQuery('bank:getList')
					.setParameters(params)
					.setFirstResult( params._start )
					.setMaxResults(params._limit)
					.resultList
	}
}