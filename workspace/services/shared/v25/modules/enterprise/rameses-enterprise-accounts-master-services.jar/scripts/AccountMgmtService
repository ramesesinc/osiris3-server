import com.rameses.annotations.*;
import com.rameses.util.*;
import java.rmi.server.*;

class AccountMgmtService {

	@PersistenceContext("main")
	def em;

	@ProxyMethod
	public def getNodes( def p ) {
		println p;
		def qry = null;
		if(p) {
			qry = em.sqlContext.createQuery('account:getChildNodes');
		}
		else {
			qry = em.sqlContext.createQuery('account:getRootNodes');
		}
		qry.setParameters(p).resultList;	
	}	
	
	
}
