import com.rameses.annotations.*;
import com.rameses.common.*;
import java.rmi.server.UID

class CityLookupService {
	
	@PersistenceContext('main')	
	def em
	
	@ProxyMethod 
	public def getColumns( params ) {
		return [
			[name:'name', caption:'Name'],  
			[name:'indexno', caption:'Index-No'],
			[name:'pin', caption:'PIN'] 
		];
	}

	@ProxyMethod
	public def getList( params ) {
		params.searchtext = (params.searchtext? params.searchtext: '')
		params.name = params.searchtext + '%'
		return em.sqlContext.createNamedQuery('city:lookup')
					.setParameters(params)
					.setFirstResult( params._start )
					.setMaxResults(params._limit)
					.resultList 
	}
}
