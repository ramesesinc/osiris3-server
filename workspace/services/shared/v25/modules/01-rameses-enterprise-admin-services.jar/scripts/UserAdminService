import com.rameses.annotations.*
import com.rameses.common.*
import java.rmi.server.UID;
import com.rameses.util.*;
import com.rameses.io.*;
import com.rameses.services.extended.*;


class UserAdminService extends AbstractCrudListService {

	@PersistenceContext("admin")
	def	em; 

	String schemaName = "user";
	
	@Env
	def env;
	
	@ProxyMethod
	public def getColumns( param ) {
		return  [
			[name:'username', caption:'User Name'],
			[name:'lastname', caption:'Last Name'],
			[name:'firstname', caption:'First Name'],
			[name:'middlename', caption:'Middle Name'],
			[name:'jobtitle', caption:'Job Title'],
			[name:'state', caption:'Status']
		]
	}

	public void beforeCreate( def o ) {
		o.name = o.lastname + ", "+o.firstname;
		o.pwd = Encoder.MD5.encode('etracs1234', o.username); 
	}

	public void beforeList( params ) {
		if (!params.name) params.name = params.searchtext;

		params.name = (params.name? params.name+'%': '%');
	}
}


