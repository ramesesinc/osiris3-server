/**
To test this, run first TestPostReceipt
*/

def svc = new osiris3.groovy.tester.Service(
    ["app.context" : "etracs25", 
     "app.host": "localhost:8070",
     "app.cluster": "osiris3"] );

def ts = svc.lookup("AFStockService");


def m = [refid:'CANCEL01', reftype:'CANCEL', refdate:new Date(), endseries: 5000300,endstub:6];

//we will cancel 2 stubs. assume unitqty of 50
m.controlid = "IRAF00001-51";
m.qty = 2;
m.startseries = m.endseries - (m.qty*50)
m.startstub = m.endstub - m.qty + 1;
println m;

ts.postCancelled( m );

m.start.step( m.end,50) {
    println it;
}