import com.rameses.annotations.*;
import com.rameses.util.*;
import java.rmi.server.*;

class AFService {

	@PersistenceContext("main")
	def em;

	@ProxyMethod
	public def getList(def o) { 
		return em.sqlContext.createNamedQuery('af:getTypes').resultList;
	}

	
	@ProxyMethod
	public def getInfo(def o) { 
		if(!o.objid) 
			throw new Exception("AFService.getInfo error. objid is required in parameter");
		def m = em.sqlContext.createNamedQuery("af:getAFInfo").setParameters(o).singleResult;
		if(!m) 
			throw new Exception("AF " + o.objid + " not found");
		return m;	
	}
	
}
