import com.rameses.annotations.*;
import com.rameses.util.*;
import java.rmi.server.*;
import com.rameses.services.extended.*;

class AFRequisitionMgmtService extends AbstractCrudListService {

	@PersistenceContext("main")
	def em;

	@Env
	def env;
	
	String schemaName = "afrequest"
	
	@ProxyMethod
	public def getNodes(def selectedNode) {
		if(!selectedNode.root) return null;
		def children = [
			[caption:'AF Request', filetype: 'afrequest']
		];
		return [
			[caption:'Draft', state:'DRAFT', children:children ],
			[caption:'Pending Purchase', state:'APPROVED', children:children],
			[caption:'Request for Issuance', state:'RECEIVED'],
			[caption:'Receipts', state:'CLOSED'],
			[caption:'Issuances', state:'CANCELLED'],
		]
	}
	
	@ProxyMethod
	public def getColumns(def o) {
		return [
			[name:'objid', caption:'Req No'],
			[name:'txntype', caption:'Type'],
			[name:'txndate', caption:'Txn Date'],
			[name:'requester.lastname', caption:'Last Name'],
			[name:'requester.firstname', caption:'First Name'],
			[name:'receiptid', caption:'Receipt No']
		]
	}
	
	
}
