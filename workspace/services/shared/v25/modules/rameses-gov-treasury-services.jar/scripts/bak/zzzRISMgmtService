import com.rameses.annotations.*;
import com.rameses.util.*;
import java.rmi.server.*;
import com.rameses.services.extended.*;

class RISMgmtService extends AbstractCrudListService {

	@PersistenceContext("main")
	def em;

	@Env
	def env;
	
	String schemaName = "ris"
	
	@ProxyMethod
	public def getNodes(def selectedNode) {
		if(!selectedNode.root) return null;
		def children = [
			[caption:'RIS', filetype: 'ris']
		];
		return [
			[caption:'Draft', state:'DRAFT', children:children ],
			[caption:'Open', state:'OPEN', children:children],
			[caption:'For Receipt', state:'RECEIVED'],
			[caption:'For Issuance', state:'RECEIVED'],
			[caption:'Receipts', state:'CLOSED'],
			[caption:'Issuances', state:'CANCELLED'],
		]
	}
	
	@ProxyMethod
	public def getColumns(def o) {
		return [
			[name:'objid', caption:'RIS No'],
			[name:'txntype', caption:'Type'],
			[name:'dtrequested', caption:'Txn Date'],
			[name:'requester.name', caption:'Requester Name'],
			[name:'approver.name', caption:'Approver Name'],
			[name:'requester.name', caption:'Issuer Name'],
			[name:'iraf', caption:'IRAF Ref'],
		]
	}
	
	
}
